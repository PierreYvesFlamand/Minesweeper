class Grid{constructor(t,e,r){this.squares=[],this.height=t,this.length=e,this.bombs=r,this.checkWin=this.height*this.length-this.bombs,document.querySelector("#flags-counter-max").textContent=this.bombs,this.fillEmpty(),this.fillWithBomb(),this.addClickEvent()}fillEmpty(){const t=document.querySelector(".grid");t.innerHTML="",t.style.gridTemplateColumns=`repeat(${this.length}, 1fr)`,t.style.gridTemplateRows=`repeat(${this.height}, 1fr)`;for(let e=0;e<this.height;e++){this.squares[e]=[];for(let r=0;r<this.length;r++){this.squares[e][r]="O";const s=document.createElement("div");s.classList.add("square"),s.setAttribute("id",`grid-${String(e).padStart(2,"0")}-${String(r).padStart(2,"0")}`),t.appendChild(s)}}}fillWithBomb(){let t,e;for(let r=0;r<this.bombs;r++){do{t=Math.floor(Math.random()*this.height),e=Math.floor(Math.random()*this.length)}while("X"==this.squares[t][e]);this.squares[t][e]="X"}}addClickEvent(){for(let t=0;t<this.height;t++)for(let e=0;e<this.length;e++){if("O"===this.squares[t][e]){let r=0;void 0!==this.squares[t-1]&&("X"===this.squares[t-1][e-1]&&r++,"X"===this.squares[t-1][e]&&r++,"X"===this.squares[t-1][e+1]&&r++),"X"===this.squares[t][e-1]&&r++,"X"===this.squares[t][e+1]&&r++,void 0!==this.squares[t+1]&&("X"===this.squares[t+1][e-1]&&r++,"X"===this.squares[t+1][e]&&r++,"X"===this.squares[t+1][e+1]&&r++),this.squares[t][e]=r}const r=document.querySelector(`#grid-${String(t).padStart(2,"0")}-${String(e).padStart(2,"0")}`);r.addEventListener("click",function(t){clickEvent(t,!1)}),r.addEventListener("contextmenu",function(t){clickEvent(t,!0)})}}}const numberToLetter=["0","1","2","3","4","5","6","7","8"],color=["#404040","blue","green","red","purple","purple","purple","purple","purple"];function createGame(t,e){grid=new Grid(t,t,e),updateFlagsCounter(flags=0),winCheck=0}function updateFlagsCounter(t){document.querySelector("#flags-counter").textContent=t}function clickEvent({target:t},e){const r=Number(t.id.slice(5,7)),s=Number(t.id.slice(8,10)),i=document.querySelector(`#grid-${t.id.slice(5,7)}-${t.id.slice(8,10)}`);e?(""===i.textContent?(i.textContent="ðŸš©",i.style.background="#8b8987",flags++):"ðŸš©"===i.textContent&&(i.textContent="",i.style.background="#f3f3f3",flags--),updateFlagsCounter(flags)):"ðŸš©"!==i.textContent&&("X"===grid.squares[r][s]?(i.style.background="black",alert("BOUM !!!\nRETRY"),createGame(curEdge,curBombs)):(""===i.textContent&&(revealSquare(r,s),0===grid.squares[r][s]&&spreadZero(r,s)),setTimeout(()=>{winCheck===grid.checkWin&&(alert("YOU WIN !!"),createGame(curEdge,curBombs))},50)))}function revealSquare(t,e){const r=document.querySelector(`#grid-${String(t).padStart(2,"0")}-${String(e).padStart(2,"0")}`);r.textContent=numberToLetter[grid.squares[t][e]],r.style.background=color[grid.squares[t][e]],r.style.color="white",0===grid.squares[t][e]&&(r.style.color="transparent"),winCheck++}function spreadZero(t,e){[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach(r=>{void 0!==grid.squares[t+r[0]]&&void 0!==grid.squares[t+r[0]][e+r[1]]&&""===document.querySelector(`#grid-${String(t+r[0]).padStart(2,"0")}-${String(e+r[1]).padStart(2,"0")}`).textContent&&document.querySelector(`#grid-${String(t+r[0]).padStart(2,"0")}-${String(e+r[1]).padStart(2,"0")}`).click()})}document.querySelector("#custom").addEventListener("click",()=>{let t,e;do{t=parseInt(prompt("Enter the length of one side of the square\nMin: 4\nMax: 25"))}while(t<4||t>25||isNaN(t));do{e=parseInt(prompt(`Enter the number of bombs\nMin: ${3*t}\nMax: ${t*t-1}`))}while(e<3*t||e>t*t-1||isNaN(e));curEdge=t,curBombs=e,createGame(t,e)});let grid,flags,winCheck,curEdge=20,curBombs=80;createGame(curEdge,curBombs);
//# sourceMappingURL=script.js.map
